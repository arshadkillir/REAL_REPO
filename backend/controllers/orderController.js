const { Order } = require('../models'); async function createOrder(req,res){ const tenantId = req.tenantId || req.body.tenantId || null; const { type, tableId, customerName, items=[] } = req.body; // simplified: no recipe consumption here to keep seed small
 const o = await Order.create({ type, tableId, customerName, tenantId, total: items.reduce((s,it)=>s + (it.price||0)*(it.quantity||1),0) }); return res.json(o); } async function listOrders(req,res){ const tenantId = req.tenantId || req.query.tenantId || null; const where = {}; if(tenantId) where.tenantId = tenantId; res.json(await Order.findAll({ where, order:[['createdAt','DESC']] })); } module.exports = { createOrder, listOrders };
