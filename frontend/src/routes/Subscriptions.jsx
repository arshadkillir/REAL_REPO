import React, { useState } from 'react'; import axios from 'axios'; import { loadStripe } from '@stripe/stripe-js'; export default function Subscriptions(){ const [tenantId,setTenantId]=useState('1'); const [plan,setPlan]=useState('pro'); async function startCheckout(){ const api = axios.create({ baseURL: import.meta.env.VITE_API_URL || 'http://localhost:4000' }); const res = await api.post('/api/billing/create-checkout-session', { tenantId, plan }); const stripe = await loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY || 'pk_test_replace'); if(res.data.url){ window.location = res.data.url; } else if(res.data.id){ await stripe.redirectToCheckout({ sessionId: res.data.id }); } } return (<div style={{padding:20}}><h2>Subscriptions</h2><div style={{marginBottom:8}}>Tenant ID: <input value={tenantId} onChange={e=>setTenantId(e.target.value)} /></div><div style={{marginBottom:8}}>Plan: <select value={plan} onChange={e=>setPlan(e.target.value)}><option value='basic'>Basic</option><option value='pro'>Pro</option></select></div><button onClick={startCheckout} style={{background:'#0ea5e9',color:'#fff',padding:8}}>Checkout</button></div>); }